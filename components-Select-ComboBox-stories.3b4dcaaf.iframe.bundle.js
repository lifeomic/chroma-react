"use strict";(self.webpackChunk_lifeomic_chroma_react=self.webpackChunk_lifeomic_chroma_react||[]).push([[3259],{"./src/components/Select/ComboBox.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,HelpMessage:()=>HelpMessage,InverseBlue:()=>InverseBlue,InverseDark:()=>InverseDark,Label:()=>Label,Placeholder:()=>Placeholder,SecondaryLabel:()=>SecondaryLabel,TooltipMessage:()=>TooltipMessage,ValueAndOnChange:()=>ValueAndOnChange,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ComboBox_stories});var react=__webpack_require__("./node_modules/react/index.js"),chromicons_esm=__webpack_require__("./node_modules/@lifeomic/chromicons/dist/chromicons.esm.js"),UniqueId=__webpack_require__("./src/components/_private/UniqueId.ts"),use_reduced_motion=__webpack_require__("./node_modules/framer-motion/dist/es/utils/use-reduced-motion.mjs"),motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs"),Portal=__webpack_require__("./node_modules/reakit/es/Portal/Portal.js"),RoverState=__webpack_require__("./node_modules/reakit/es/Rover/RoverState.js"),Rover=__webpack_require__("./node_modules/reakit/es/Rover/Rover.js"),Select=__webpack_require__("./src/components/Select/Select.tsx"),Text=__webpack_require__("./src/components/Text/Text.tsx"),FormElementUtils=__webpack_require__("./src/components/_private/forms/FormElementUtils.ts"),FormHelpMessage=__webpack_require__("./src/components/_private/forms/FormHelpMessage.tsx"),FormErrorMessage=__webpack_require__("./src/components/_private/forms/FormErrorMessage.tsx"),PopoverState=__webpack_require__("./node_modules/reakit/es/Popover/PopoverState.js"),PopoverDisclosure=__webpack_require__("./node_modules/reakit/es/Popover/PopoverDisclosure.js"),Popover=__webpack_require__("./node_modules/reakit/es/Popover/Popover.js"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),es2015=__webpack_require__("./node_modules/react-focus-lock/dist/es2015/index.js"),Tooltip=__webpack_require__("./src/components/Tooltip/Tooltip.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const popoverVariants={open:{opacity:1,offsetTop:-2,transition:{duration:.25,ease:"easeOut"}},closed:{opacity:0,offsetTop:-18}},popoverVariantsReduced={open:{opacity:1,transition:{duration:.2,ease:"easeOut"}},closed:{opacity:0}},listMotionVariants={open:{transition:{delayChildren:.025,staggerChildren:.045,duration:.2}},closed:{}},listMotionVariantsReduced={open:{},closed:{}},listItemMotionVariants={open:{y:0,opacity:1,transition:{y:{stiffness:1e3,velocity:-100}}},closed:{y:-16,opacity:0}},listItemMotionVariantsReduced={open:{opacity:1},closed:{opacity:0}},ComboBox=_ref=>{let{"aria-label":ariaLabel,children,className,color="default",errorMessage,fullWidth,hasError,helpMessage,icon:Icon,id,label,secondaryLabel,onChange,placeholder,placement,popoverAriaLabel,selectedOptionDisplay,tooltipMessage,value,showRequiredLabel,...rootProps}=_ref;const classes=(0,Select.yK)({}),popover=(0,PopoverState.v)({placement}),rover=(0,RoverState.d)({loop:!0,orientation:"vertical"}),shouldReduceMotion=(0,use_reduced_motion.J)(),buttonRef=react.useRef(),[width,setWidth]=react.useState(50),[internalSelections,setInternalSelections]=react.useState(null),[uniqueId]=react.useState((()=>id||name||(0,UniqueId.l)("combobox-")));react.useEffect((()=>{setWidth(buttonRef.current.getBoundingClientRect().width)})),react.useEffect((()=>{const matches=react.Children.toArray(children).filter((child=>react.isValidElement(child)?value?.includes(child.props.value):null));0!==matches.length?setInternalSelections(matches.map((m=>m.props))):setInternalSelections([])}),[children,value]);return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.Z)(classes.root,className),children:[(0,jsx_runtime.jsxs)("label",{"aria-hidden":"true",className:(0,clsx_m.Z)(classes.label,"inverse"===color&&classes.labelInverse,!label&&ariaLabel&&classes.srOnly),htmlFor:uniqueId,children:[showRequiredLabel&&(0,jsx_runtime.jsx)("span",{className:(0,clsx_m.Z)(classes.required,"inverse"===color&&classes.requiredInverse),children:"*"}),label||ariaLabel,!!Icon&&tooltipMessage&&(0,jsx_runtime.jsx)(Tooltip.u,{title:tooltipMessage,children:(0,jsx_runtime.jsx)("span",{className:classes.tooltipContainer,children:(0,jsx_runtime.jsx)(Icon,{className:(0,clsx_m.Z)(classes.labelIcon,"inverse"===color&&classes.labelIconInverse),width:16,height:16,role:"img","aria-hidden":!0})})}),secondaryLabel?(0,jsx_runtime.jsx)("span",{className:(0,clsx_m.Z)(classes.labelSecondary,"inverse"===color&&classes.labelInverse),children:secondaryLabel}):null]}),(0,jsx_runtime.jsx)(PopoverDisclosure.x,{className:(0,clsx_m.Z)(classes.button,classes.comboxBoxOverflow,hasError&&classes.buttonError,fullWidth&&classes.buttonFullWidth,{[classes.buttonInverse]:"inverse"===color}),ref:buttonRef,"aria-describedby":(0,FormElementUtils.Oh)({hasError,hasHelpMessage:!!helpMessage,uniqueId}),id:uniqueId,...popover,...rootProps,children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[0===internalSelections?.length&&(0,jsx_runtime.jsx)(motion.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},children:(0,jsx_runtime.jsx)(Text.xv,{className:(0,clsx_m.Z)(classes.buttonText,classes.placeholderText,classes.comboBoxPlaceholder),size:"subbody",children:placeholder})}),internalSelections&&internalSelections?.length>0&&!selectedOptionDisplay&&(0,jsx_runtime.jsx)(Text.xv,{className:(0,clsx_m.Z)(classes.buttonText,classes.chipList),size:"subbody",style:fullWidth?{}:{maxWidth:width-42},children:internalSelections?.map(((selectedOption,index)=>(0,jsx_runtime.jsx)(motion.E.span,{className:classes.chip,initial:shouldReduceMotion?{opacity:0}:{opacity:0,y:-8},animate:shouldReduceMotion?{opacity:1}:{opacity:1,transition:{duration:.2,ease:"easeOut"},y:0},children:selectedOption.title},index)))}),internalSelections&&internalSelections?.length>0&&selectedOptionDisplay&&(0,jsx_runtime.jsx)(Text.xv,{className:classes.buttonText,size:"subbody",children:selectedOptionDisplay(internalSelections)}),(0,jsx_runtime.jsx)("div",{className:classes.buttonArrowContainer,role:"presentation",children:(0,jsx_runtime.jsx)(chromicons_esm._ME,{className:(0,clsx_m.Z)(classes.arrowIcon,popover.visible&&classes.rotate),"aria-hidden":!0,role:"img",width:18,height:18})})]})}),helpMessage&&(0,jsx_runtime.jsx)(FormHelpMessage.$,{className:classes.message,color,rootElementId:uniqueId,describedById:(0,FormElementUtils.cU)(uniqueId),children:helpMessage}),hasError&&(0,jsx_runtime.jsx)(FormErrorMessage.J,{className:classes.message,color,rootElementId:uniqueId,describedById:(0,FormElementUtils.fH)(uniqueId),children:errorMessage}),(0,jsx_runtime.jsx)(Portal.h,{children:(0,jsx_runtime.jsx)(es2015.ZP,{children:(0,jsx_runtime.jsx)(Popover.J,{"aria-label":label||ariaLabel||popoverAriaLabel,className:classes.popover,...popover,style:{width},as:motion.E.div,animate:popover.visible?"open":"closed",variants:shouldReduceMotion?popoverVariantsReduced:popoverVariants,children:(0,jsx_runtime.jsx)(motion.E.ul,{className:classes.ul,variants:shouldReduceMotion?listMotionVariantsReduced:listMotionVariants,role:"listbox","aria-multiselectable":!0,children:react.Children.map(children,(child=>{if(!react.isValidElement(child))return null;const option=child;return(0,jsx_runtime.jsx)(Rover.u,{...rover,"aria-selected":value?.includes(option?.props?.value),className:classes.option,as:motion.E.li,disabled:child?.props?.disabled,role:"option",value:option?.props?.value,variants:shouldReduceMotion?listItemMotionVariantsReduced:listItemMotionVariants,onClick:()=>((optionValue,meta)=>{const isAlreadySelected=internalSelections?.find((s=>s.value===optionValue));if(isAlreadySelected){const filteredSelections=internalSelections?.filter((s=>s.value!==optionValue))||[];return void onChange?.([...filteredSelections?.map((s=>s.value))],[...filteredSelections?.map((s=>s.meta))])}const valueOptions=internalSelections?.map((s=>s.value))||[],metaOptions=internalSelections?.map((s=>s.meta))||[];onChange?.([...valueOptions,optionValue],[...metaOptions,meta])})(option?.props?.value,option?.props?.meta),children:react.cloneElement(option,{isChecked:value?.includes(option?.props?.value),...option.props})})}))})})})})]})};ComboBox.displayName="ComboBox";try{ComboBox.displayName="ComboBox",ComboBox.__docgenInfo={description:'A multi-select component. This component leverages styles and props from Select. If you need a single-select\ncomponent, see Select.\n\n### Accessibility\n\n- The list of options has the `aria-multiselectable` attribute so that\n  screenreaders can announce the number of options selected.\n- When the select menu is open, the arrow keys on a user\'s keyboard can be used\n  to navigate between options.\n- The Escape key closes the open menu.\n- Pressing the Enter key "clicks" the option.\n- A checkmark is read with the selected menu option.\n- The label and input are "connected" via a uniqueId and the `for` + `id`\n  attributes.\n- The label has the `aria-hidden` attribute so it cannot be focused by\n  screenreaders. Instead, the input element receives the focus, and the label is\n  read as part of the input.\n- The component uses a uniqueId to link the input to the help and error messages\n  via `aria-describedby`. This allows screenreaders to read the help and error\n  messages.\n- The icon has `aria-hidden` and `role="img"` attributes.\n\n### Links\n\n- [Component Source](https://github.com/lifeomic/chroma-react/blob/master/src/components/Select/ComboBox.tsx)\n- [Story Source](https://github.com/lifeomic/chroma-react/blob/master/stories/components/ComboBox/ComboBox.stories.tsx)',displayName:"ComboBox",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((values: string[], meta: string[]) => void)"}},selectedOptionDisplay:{defaultValue:null,description:"",name:"selectedOptionDisplay",required:!1,type:{name:"((options: SelectOptionProps[]) => ReactNode)"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string[]"}},showRequiredLabel:{defaultValue:null,description:"This property shows the required asterisk (*). Required validation needs to be implemented separately.",name:"showRequiredLabel",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"MemoExoticComponent<(props: SVGProps<SVGSVGElement>) => Element>"}},tooltipMessage:{defaultValue:null,description:"",name:"tooltipMessage",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},color:{defaultValue:{value:"default"},description:"",name:"color",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"inverse"'}]}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"string"}},hasError:{defaultValue:null,description:"",name:"hasError",required:!1,type:{name:"boolean"}},helpMessage:{defaultValue:null,description:"",name:"helpMessage",required:!1,type:{name:"string"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"top-start"'},{value:'"top"'},{value:'"top-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"bottom-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'}]}},secondaryLabel:{defaultValue:null,description:"",name:"secondaryLabel",required:!1,type:{name:"string"}},secondaryAction:{defaultValue:null,description:"",name:"secondaryAction",required:!1,type:{name:"SelectSecondaryAction"}},popoverAriaLabel:{defaultValue:null,description:"",name:"popoverAriaLabel",required:!1,type:{name:"string"}},popoverStyle:{defaultValue:null,description:"",name:"popoverStyle",required:!1,type:{name:"MotionStyle"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Select/ComboBox.tsx#ComboBox"]={docgenInfo:ComboBox.__docgenInfo,name:"ComboBox",path:"src/components/Select/ComboBox.tsx#ComboBox"})}catch(__react_docgen_typescript_loader_error){}var SelectOption=__webpack_require__("./src/components/Select/SelectOption.tsx");const ComboBox_stories={title:"Form Components/ComboBox",component:ComboBox,args:{label:"Combo Box"}},Template=args=>(0,jsx_runtime.jsxs)(ComboBox,{...args,children:[(0,jsx_runtime.jsx)(SelectOption.$m,{title:"Option 1",value:"option1"}),(0,jsx_runtime.jsx)(SelectOption.$m,{title:"Option 2",subtitle:"Subtitle",value:"option2"}),(0,jsx_runtime.jsx)(SelectOption.$m,{title:"Option 3",value:"option3"}),(0,jsx_runtime.jsx)(SelectOption.$m,{title:"Option 4",value:"option4"})]});Template.displayName="Template";const Default={render:Template},ValueAndOnChange={render:Template,parameters:{docs:{description:{story:'The ComboBox works by providing `value` for the checked options and `onChange`\n  for listening for when items are added/removed. ComboBox expects the `value` to\n  be an array of options. \n\n  When an option is selected, the `onChange` is called. This function provides two\n  arguments, one for the selected values, and then the `meta` object. The `meta`\n  object can be used to store additional information about the option.\n\n  When an item is currently selected, and then clicked a second time, the item is\n  "removed". Chroma does not remove this item for you from the list. It is up to\n  you, the consumer, to do this yourself with a combination of `onChange` and\n  `value`.'}}},args:{value:["option1","option3"]}},Label={render:Template,parameters:{docs:{description:{story:"The label to display for the ComboBox element. This is also the popover title\n  announced for screen readers when the select menu is open. If a label is not\n  provided, `popoverAriaLabel` should be provided."}}}},SecondaryLabel={render:Template,parameters:{docs:{description:{story:"A secondary, supplemental label to display for the combobox element."}}},args:{secondaryLabel:"Secondary Label"}},Placeholder={render:Template,parameters:{docs:{description:{story:"The placeholder text to display."}}},args:{placeholder:"Placeholder"}},HelpMessage={render:Template,parameters:{docs:{description:{story:"Caption, help text to display underneath the element. This should be\n  supplemental text to the label, typically an expanded description of the option."}}},args:{helpMessage:"Help Message"}},TooltipMessage={render:Template,parameters:{docs:{description:{story:"Text to display on hover over a small icon. This should be\n  supplemental text to the label, typically an expanded description of the option."}}},args:{icon:chromicons_esm.j$F,tooltipMessage:"Tooltip Message"}},InverseDark={render:Template,parameters:{backgrounds:{default:"dark"}},args:{color:"inverse"}},InverseBlue={render:Template,parameters:{backgrounds:{default:"blue"}},args:{color:"inverse"}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: Template\n}",...Default.parameters?.docs?.source}}},ValueAndOnChange.parameters={...ValueAndOnChange.parameters,docs:{...ValueAndOnChange.parameters?.docs,source:{originalSource:"{\n  render: Template,\n  parameters: {\n    docs: {\n      description: {\n        story: `The ComboBox works by providing \\`value\\` for the checked options and \\`onChange\\`\n  for listening for when items are added/removed. ComboBox expects the \\`value\\` to\n  be an array of options. \n\n  When an option is selected, the \\`onChange\\` is called. This function provides two\n  arguments, one for the selected values, and then the \\`meta\\` object. The \\`meta\\`\n  object can be used to store additional information about the option.\n\n  When an item is currently selected, and then clicked a second time, the item is\n  \"removed\". Chroma does not remove this item for you from the list. It is up to\n  you, the consumer, to do this yourself with a combination of \\`onChange\\` and\n  \\`value\\`.`\n      }\n    }\n  },\n  args: {\n    value: ['option1', 'option3']\n  }\n}",...ValueAndOnChange.parameters?.docs?.source}}},Label.parameters={...Label.parameters,docs:{...Label.parameters?.docs,source:{originalSource:"{\n  render: Template,\n  parameters: {\n    docs: {\n      description: {\n        story: `The label to display for the ComboBox element. This is also the popover title\n  announced for screen readers when the select menu is open. If a label is not\n  provided, \\`popoverAriaLabel\\` should be provided.`\n      }\n    }\n  }\n}",...Label.parameters?.docs?.source}}},SecondaryLabel.parameters={...SecondaryLabel.parameters,docs:{...SecondaryLabel.parameters?.docs,source:{originalSource:"{\n  render: Template,\n  parameters: {\n    docs: {\n      description: {\n        story: `A secondary, supplemental label to display for the combobox element.`\n      }\n    }\n  },\n  args: {\n    secondaryLabel: 'Secondary Label'\n  }\n}",...SecondaryLabel.parameters?.docs?.source}}},Placeholder.parameters={...Placeholder.parameters,docs:{...Placeholder.parameters?.docs,source:{originalSource:"{\n  render: Template,\n  parameters: {\n    docs: {\n      description: {\n        story: `The placeholder text to display.`\n      }\n    }\n  },\n  args: {\n    placeholder: 'Placeholder'\n  }\n}",...Placeholder.parameters?.docs?.source}}},HelpMessage.parameters={...HelpMessage.parameters,docs:{...HelpMessage.parameters?.docs,source:{originalSource:"{\n  render: Template,\n  parameters: {\n    docs: {\n      description: {\n        story: `Caption, help text to display underneath the element. This should be\n  supplemental text to the label, typically an expanded description of the option.`\n      }\n    }\n  },\n  args: {\n    helpMessage: 'Help Message'\n  }\n}",...HelpMessage.parameters?.docs?.source}}},TooltipMessage.parameters={...TooltipMessage.parameters,docs:{...TooltipMessage.parameters?.docs,source:{originalSource:"{\n  render: Template,\n  parameters: {\n    docs: {\n      description: {\n        story: `Text to display on hover over a small icon. This should be\n  supplemental text to the label, typically an expanded description of the option.`\n      }\n    }\n  },\n  args: {\n    icon: HelpCircle,\n    tooltipMessage: 'Tooltip Message'\n  }\n}",...TooltipMessage.parameters?.docs?.source}}},InverseDark.parameters={...InverseDark.parameters,docs:{...InverseDark.parameters?.docs,source:{originalSource:"{\n  render: Template,\n  parameters: {\n    backgrounds: {\n      default: 'dark'\n    }\n  },\n  args: {\n    color: 'inverse'\n  }\n}",...InverseDark.parameters?.docs?.source}}},InverseBlue.parameters={...InverseBlue.parameters,docs:{...InverseBlue.parameters?.docs,source:{originalSource:"{\n  render: Template,\n  parameters: {\n    backgrounds: {\n      default: 'blue'\n    }\n  },\n  args: {\n    color: 'inverse'\n  }\n}",...InverseBlue.parameters?.docs?.source}}};const __namedExportsOrder=["Default","ValueAndOnChange","Label","SecondaryLabel","Placeholder","HelpMessage","TooltipMessage","InverseDark","InverseBlue"]}}]);